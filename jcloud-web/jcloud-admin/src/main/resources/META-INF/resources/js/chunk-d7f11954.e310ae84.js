(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7f11954"],{b3f6:function(e,t,n){},c741:function(e,t,n){"use strict";n("b3f6")},cb48:function(e,t,n){"use strict";n.r(t);var r,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-login"},[n("div",{staticClass:"page-login--layer page-login--layer-area"},[n("ul",{staticClass:"circles"},e._l(10,(function(e){return n("li",{key:e})})),0)]),n("div",{staticClass:"page-login--layer page-login--layer-time",attrs:{flex:"main:center cross:center"}},[e._v(" "+e._s(e.time)+" ")]),n("div",{staticClass:"page-login--layer"},[n("div",{staticClass:"page-login--content",attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[e._m(0),n("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center"}},[n("div",{staticClass:"page-login--form"},[n("el-card",{attrs:{shadow:"never"}},[n("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text",placeholder:"用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[n("i",{staticClass:"fa fa-user-circle-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[n("i",{staticClass:"fa fa-keyboard-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{attrs:{type:"text",placeholder:"验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},model:{value:e.formLogin.code,callback:function(t){e.$set(e.formLogin,"code",t)},expression:"formLogin.code"}},[n("template",{slot:"append"},[n("img",{ref:"loginCode",staticClass:"login-code",attrs:{src:e.codeSrc},on:{click:e.changeSrc}})])],2)],1),n("el-button",{staticClass:"button-login",attrs:{loading:e.loginLoading,size:"default",type:"primary"},on:{click:e.submit}},[e._v(" 登录 ")])],1)],1)],1)]),n("div",{staticClass:"page-login--content-footer"})])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-login--content-header"},[n("p",{staticClass:"page-login--content-header-motto"},[e._v(" 时间是一切财富中最宝贵的财富 ")])])}],a=n("fd6a"),s=(n("3fab"),n("ed02"),n("f1d6")),l=n.n(s),u=n("7736"),c=n("1353"),p=new Uint8Array(16);function d(){if(!r&&(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(p)}var m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function f(e){return"string"===typeof e&&m.test(e)}for(var g=f,y=[],h=0;h<256;++h)y.push((h+256).toString(16).substr(1));function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(y[e[t+0]]+y[e[t+1]]+y[e[t+2]]+y[e[t+3]]+"-"+y[e[t+4]]+y[e[t+5]]+"-"+y[e[t+6]]+y[e[t+7]]+"-"+y[e[t+8]]+y[e[t+9]]+"-"+y[e[t+10]]+y[e[t+11]]+y[e[t+12]]+y[e[t+13]]+y[e[t+14]]+y[e[t+15]]).toLowerCase();if(!g(n))throw TypeError("Stringified UUID is invalid");return n}var b=v;function k(e,t,n){e=e||{};var r=e.random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return b(r)}var C=k,w={mixins:[c["a"]],data:function(){return{timeInterval:null,time:l()().format("HH:mm:ss"),dialogVisible:!1,users:[],formLogin:{username:"",password:"",code:"",grant_type:"password",requestSn:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},timeStamp:"",loginLoading:!1}},computed:{codeSrc:function(){return"/auth/loginCode?requestSn="+this.formLogin.requestSn+"&t="+this.timeStamp}},mounted:function(){var e=this;this.timeStamp=(new Date).getTime(),this.formLogin.requestSn=this.getUuid(),this.timeInterval=setInterval((function(){e.refreshTime()}),1e3)},beforeDestroy:function(){clearInterval(this.timeInterval)},methods:Object(a["a"])(Object(a["a"])({},Object(u["b"])("d2admin/account",["login"])),{},{refreshTime:function(){this.time=l()().format("HH:mm:ss")},submit:function(){var e=this;this.$refs.loginForm.validate((function(t){t?(e.loginLoading=!0,e.$post("/auth/oauth/token",e.formLogin,{Authorization:"Basic amNsb3VkLWFkbWluOmpjbG91ZC1hZG1pbg=="}).then((function(t){1===t.code?e.login(t).then((function(){e.$router.replace(e.$route.query.redirect||"/")})):(e.loginLoading=!1,e.changeSrc(),e.$message.error(t.msg))})).catch((function(t){e.loginLoading=!1}))):e.$message.error("表单校验失败，请检查")}))},getUuid:function(){return C().replace(/-/g,"")},changeSrc:function(){this.timeStamp=(new Date).getTime()}})},L=w,S=(n("c741"),n("cba8")),x=Object(S["a"])(L,o,i,!1,null,null,null);t["default"]=x.exports}}]);