(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59c2272c"],{"131c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("div",{staticClass:"search-area"},[a("el-form",{attrs:{inline:!0,model:e.search}},[a("el-form-item",{attrs:{label:"内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(!0)}}},[a("el-input",{attrs:{clearable:"",size:"mini",placeholder:"请输入",disabled:e.searchDisabled},model:{value:e.search.message,callback:function(t){e.$set(e.search,"message",t)},expression:"search.message"}})],1),a("el-form-item",{attrs:{label:"级别"}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",clearable:"",disabled:e.searchDisabled},on:{change:function(t){return e.getList(!0)}},model:{value:e.search.level,callback:function(t){e.$set(e.search,"level",t)},expression:"search.level"}},[a("el-option",{attrs:{value:"ERROR"}},[e._v("ERROR")]),a("el-option",{attrs:{value:"WARN"}},[e._v("WARN")]),a("el-option",{attrs:{value:"INFO"}},[e._v("INFO")]),a("el-option",{attrs:{value:"DEBUG"}},[e._v("DEBUG")]),a("el-option",{attrs:{value:"TRACE"}},[e._v("TRACE")])],1)],1),a("el-form-item",{attrs:{label:"所属项目"}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",disabled:e.searchDisabled},on:{change:function(t){return e.getList(!0)}},model:{value:e.search.projectName,callback:function(t){e.$set(e.search,"projectName",t)},expression:"search.projectName"}},e._l(e.projectNamesList,(function(t,i){return a("el-option",{key:i,attrs:{value:t.label}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",{attrs:{label:"服务器地址"}},[a("el-select",{attrs:{placeholder:"请选择",size:"mini",clearable:"",disabled:e.searchDisabled},on:{change:function(t){return e.getList(!0)}},model:{value:e.search.sourceFrom,callback:function(t){e.$set(e.search,"sourceFrom",t)},expression:"search.sourceFrom"}},e._l(e.sourceFromList,(function(t,i){return a("el-option",{key:i,attrs:{value:t.label}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",{attrs:{label:"class"}},[a("el-input",{attrs:{clearable:"",size:"mini",placeholder:"请输入",disabled:e.searchDisabled},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(!0)}},model:{value:e.search.clazz,callback:function(t){e.$set(e.search,"clazz",t)},expression:"search.clazz"}})],1),a("el-form-item",{attrs:{label:"表格显示"}},[a("el-switch",{attrs:{disabled:e.searchDisabled,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.search.showTable,callback:function(t){e.$set(e.search,"showTable",t)},expression:"search.showTable"}})],1),a("el-form-item",{attrs:{label:"自动刷新"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.autoRefresh},model:{value:e.search.autoRefresh,callback:function(t){e.$set(e.search,"autoRefresh",t)},expression:"search.autoRefresh"}}),e.search.autoRefresh?a("i",{staticClass:"fa fa-refresh fa-spin fa-fw",staticStyle:{color:"#13ce66"}}):e._e()],1)],1)],1),e.search.showTable?a("div",[a("CommonTable",{attrs:{tableData:e.tableData,tableLoading:e.tableLoading,tableHeader:e.tableHeader,isShowOperation:!1},scopedSlots:e._u([{key:"operate",fn:function(t){var i=t.row;return[a("TableOperation",{attrs:{"operation-list":e.tableOperationList(i)}})]}}],null,!1,3695691215)}),a("div",{staticClass:"el-page"},[a("el-pagination",{attrs:{"current-page":e.pager.currentPage,"page-sizes":e.pageSizes,"page-size":e.pager.pageSize,layout:e.pagerSetting,total:e.pager.totalCount},on:{"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e(),e.search.showTable?e._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.infiniteLoading,expression:"infiniteLoading"}]},[a("pre",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"d2-highlight hljs",attrs:{"infinite-scroll-disabled":e.infiniteDisabled},domProps:{innerHTML:e._s(e.highlightContent)}}),a("el-backtop",{ref:"backtop",attrs:{target:".d2-highlight",right:100,bottom:100}},[e._v("UP")])],1)])},n=[],r=(a("3fab"),a("814e"),a("3e22"),a("ba96")),l=a.n(r),s=(a("7903"),a("684a")),o=a("93f6"),c={name:"admin-clients",components:{CommonTable:s["a"],TableOperation:o["a"]},data:function(){return{searchList:[{key:"clazz",name:"class",type:"input"},{key:"level",name:"日志级别",type:"input"},{key:"message",name:"日志内容",type:"input"},{key:"projectName",name:"所属项目",type:"input"},{key:"sourceFrom",name:"服务器地址",type:"input"}],tableHeader:[{prop:"createTime",label:"时间"},{prop:"level",label:"日志级别",html:!0,formatter:function(e){return"ERROR"===e?"<span style='color: red'>"+e+"</span>":e}},{prop:"pid",label:"pid"},{prop:"threadName",label:"线程名"},{prop:"clazz",label:"日志类"},{prop:"message",label:"内容",openPopover:!0},{prop:"projectName",label:"所属项目"},{prop:"sourceFrom",label:"日志来源"}],search:{id:"",showTable:!1,autoRefresh:!1,projectName:"jcloud-admin"},formSettingInfo:[],formData:{},formRules:{},pager:{totalCount:0,pageCount:1,pageSize:100,currentPage:0},highlightContent:"",infiniteDisabled:!1,infiniteLoading:!1,searchDisabled:!1,intervalPid:"",projectNamesList:[],sourceFromList:[],lastTotalCount:0,pageSizes:[15,20,40,60,100],pagerSetting:"total, sizes, prev, pager, next, jumper",tableData:[],tableLoading:!1,dialogFormVisible:!1,listPath:"/admin/appLog/pageList",savePath:"",deletePath:""}},watch:{"search.showTable":{handler:function(e,t){e!==t&&this.getList(!0)},deep:!0}},created:function(){this.getEnum()},methods:{getList:function(e){var t=this;this.tableLoading=!0,e&&(this.pager.currentPage=1,this.search.id="",this.highlightContent="");var a=Object.assign({},this.search,{pageSize:this.pager.pageSize,currentPage:this.pager.currentPage});this.$get(this.listPath,a).then((function(e){if(t.tableLoading=!1,1===e.code){if(t.search.showTable)t.tableData=e.data.list;else{if(e.reserveData.value)return t.$message.warning("向下浏览已失效，重回第一页开始浏览"),void t.getList(!0);e.reserveData.label?(t.highlightContent=t.highlightContent+l.a.highlightAuto(e.reserveData.label,["java","html","javascript","json","css","scss","less"]).value,t.infiniteDisabled=!1):(t.highlightContent=t.highlightContent+"<span style='color: red'>已无更多内容</span>",t.infiniteDisabled=!0)}t.infiniteLoading=!1,t.search.id=e.reserveData.name,t.pager.totalCount=e.data.totalCount,t.pager.pageCount=e.data.pageCount,t.pager.pageSize=e.data.pageSize,t.pager.currentPage=e.data.currentPage}})).catch((function(e){t.tableLoading=!1}))},tableOperationList:function(e){return[]},deleteData:function(e){var t=this;this.$confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$get(t.deletePath+"/"+e.id).then((function(e){1===e.code&&(t.$message({message:"删除成功！",type:"success"}),t.getList(!0))}))}))},handleCurrentChange:function(e){this.pager.currentPage=e,this.getList()},handlePageSizeChange:function(e){this.pager.pageSize=e,this.getList(!0)},getEnum:function(){var e=this;this.$get("/admin/appLog/getEnum").then((function(t){1===t.code&&(e.projectNamesList=t.data.projectName,e.sourceFromList=t.data.sourceFrom)}))},loadMore:function(){this.infiniteLoading=!0,this.pager.currentPage=this.pager.currentPage+1,this.getList()},refreshData:function(){var e=this;this.$get("/admin/appLog/autoRefresh",{totalCount:this.pager.totalCount,projectName:this.search.projectName}).then((function(t){t.reserveData&&t.reserveData.label&&t.data.totalCount>e.pager.totalCount&&(e.highlightContent=l.a.highlightAuto(t.reserveData.label,["java","html","javascript","json","css","scss","less"]).value+e.highlightContent,e.pager.totalCount=t.data.totalCount)}))},autoRefresh:function(){var e=this;this.search.autoRefresh?(this.searchDisabled=!0,this.infiniteDisabled=!0,this.intervalPid=setInterval((function(){e.refreshData()}),2e3)):(this.searchDisabled=!1,clearInterval(this.intervalPid))}}},h=c,u=a("cba8"),p=Object(u["a"])(h,i,n,!1,null,null,null);t["default"]=p.exports},"684a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-area"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"sort-change":e.changeSort,"selection-change":e.changeSelectList}},[e.isShowSelect?a("el-table-column",{attrs:{type:"selection",width:"55",fixed:"",align:"center"}}):e._e(),e._l(e.tableHeader,(function(t,i){return a("el-table-column",{key:i,attrs:{"show-overflow-tooltip":"","min-height":"46",prop:t.prop,label:t.label,fixed:t.fixed||!1,sortable:t.sortable||!1,size:t.size||100,align:t.alignType||"center"},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.row;return[t.formatter?a("div",[t.html?a("div",{domProps:{innerHTML:e._s(t.formatter(n[t.prop]))}}):a("span",[e._v(" "+e._s(t.formatter(n[t.prop]))+" ")])]):a("div",[t.html?a("div",{domProps:{innerHTML:e._s(n[t.prop])}}):a("span",[e._v(" "+e._s(n[t.prop])+" ")])])]}}],null,!0)})})),e.isShowOperation?a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right","min-width":e.operateWidth+"px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._t("operate",null,{row:a})]}}],null,!0)}):e._e()],2)],1)},n=[],r=(a("8372"),{name:"commonTable",props:{tableData:{type:Array,default:function(){return[]}},tableHeader:{type:Array,default:function(){return[]}},tableLoading:{type:Boolean,default:!1},multipleSelection:{type:Array,default:function(){return[]}},isShowOperation:{type:Boolean,default:function(){return!0}},isShowSelect:{type:Boolean,default:function(){return!0}},operateWidth:{type:Number,default:function(){return 120}}},data:function(){return{}},methods:{changeSort:function(e){this.$emit("sort-events",e)},changeSelectList:function(e){this.$emit("update:multipleSelection",e)}}}),l=r,s=a("cba8"),o=Object(s["a"])(l,i,n,!1,null,null,null);t["a"]=o.exports},7903:function(e,t,a){},"93f6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.part1Operation,(function(t,i){return a("el-button",{key:i,attrs:{size:"mini",type:t.type},on:{click:t.operation}},[e._v(" "+e._s(t.label)+" ")])})),e.operationList.length>e.showAllLimit?a("el-dropdown",{staticStyle:{"padding-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" 更多"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.moreOperation,(function(t,i){return a("el-dropdown-item",{key:i,nativeOn:{click:function(e){return t.operation.apply(null,arguments)}}},[e._v(" "+e._s(t.label)+" ")])})),1)],1):e._e()],2)},n=[],r=(a("8372"),a("57b6"),{name:"tableOperation",props:{operationList:{type:Array,default:function(){return[]}},showAllLimit:{type:Number,default:3}},computed:{part1Operation:function(){return this.operationList.length>this.showAllLimit?this.operationList.slice(0,2):this.operationList},moreOperation:function(){return this.operationList.length>this.showAllLimit?this.operationList.slice(2,this.operationList.length):[]}}}),l=r,s=a("cba8"),o=Object(s["a"])(l,i,n,!1,null,null,null);t["a"]=o.exports}}]);