(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58724276"],{1884:function(e,t,i){},"9bb2":function(e,t,i){"use strict";i("1884")},b13a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-drawer",{attrs:{title:"权限预览",visible:e.drawerVisible,direction:"rtl",size:"30%","before-close":e.handleDrawerClose},on:{"update:visible":function(t){e.drawerVisible=t}}},[i("div",{staticClass:"drawer-content"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.tabVisible(0)?i("el-tab-pane",{attrs:{label:"菜单",name:"0"}},[i("el-tree",{ref:"menuTree",attrs:{"default-expand-all":"","empty-text":"当前暂无数据","show-checkbox":"","node-key":"id",data:e.menuTreeList},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"tree-title",attrs:{title:a.extra}},[e._v(e._s(a.label))])])}}],null,!1,3837425455)})],1):e._e(),e.tabVisible(1)?i("el-tab-pane",{attrs:{label:"API",name:"1"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.apiList}},[i("el-table-column",{attrs:{prop:"apiPath",label:"请求路径","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"apiLimit",label:"调用次数限制"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("apiLimitFormat")(t.row.apiLimit)))])]}}],null,!1,3719255644)}),i("el-table-column",{attrs:{prop:"apiLimitStrategy",label:"限制策略"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e._f("apiLimitStrategyFormat")(t.row.apiLimitStrategy)))])]}}],null,!1,366319484)}),i("el-table-column",{attrs:{prop:"serviceId",label:"所属服务"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.getServiceName(t.row.serviceId)))])]}}],null,!1,3493601723)})],1)],1):e._e(),e.tabVisible(2)?i("el-tab-pane",{attrs:{label:"自定义",name:"2"}},[i("el-tree",{ref:"resourceTree",attrs:{"default-expand-all":"","empty-text":"当前暂无数据","show-checkbox":"","node-key":"id",data:e.resourceTreeList},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"tree-title",attrs:{title:a.extra}},[e._v(e._s(a.label))])])}}],null,!1,3837425455)})],1):e._e()],1)],1)])],1)},r=[],s=(i("a9b6"),i("c284"),i("28fd"),i("3e22"),{name:"privileges-view",data:function(){return{drawerVisible:!1,activeName:"0",apiTreeList:[],apiList:[],listLoading:!1}},props:{privileges:{type:Object,default:function(){return{resourceIds:[],apiConfig:[],id:"",resourceType:0,privilegeType:0,serviceId:""}}},apiResources:{type:Array,default:function(){return[]}},menuTreeList:{type:Array,default:function(){return[]}},resourceTreeList:{type:Array,default:function(){return[]}},showTab:{type:Array,default:function(){return[0,1,2]}}},created:function(){},filters:{apiLimitFormat:function(e){return 2147483647===e?"无限制":e},apiLimitStrategyFormat:function(e){return e?"每天":"次数"}},methods:{handleDrawerClose:function(e){e()},handleClick:function(e,t){this.privileges.resourceType=this.activeName,this.getPrivileges()},show:function(){this.privileges.resourceType=this.showTab[0],this.activeName=this.showTab[0]+"",this.privileges.serviceId="",this.drawerVisible=!0,this.getPrivileges()},changeService:function(){this.getPrivileges()},getPrivileges:function(){var e=this;this.$get("/admin/privilege/getUserAllPrivileges",{resourceType:this.privileges.resourceType,id:this.privileges.id,privilegeType:this.privileges.privilegeType,serviceId:this.privileges.serviceId}).then((function(t){var i;1===t.code&&(0===t.data.resourceType?i=e.$refs.menuTree:1===t.data.resourceType?(e.apiTreeList=t.data.apiTree,e.apiList=t.data.apiConfig,i=e.$refs.apiTree):i=e.$refs.resourceTree,e.$nextTick((function(){t.data.resourceIds.forEach((function(e){i.setChecked(e,!0,!1)}))})))}))},tabVisible:function(e){return this.showTab.filter((function(t){return t===e})).length>0},getServiceName:function(e){var t=this.apiResources.filter((function(t){return t.location===e}));return t.length>0?t[0].name:e}}}),n=s,l=(i("9bb2"),i("cba8")),o=Object(l["a"])(n,a,r,!1,null,"3cbc658c",null);t["default"]=o.exports}}]);