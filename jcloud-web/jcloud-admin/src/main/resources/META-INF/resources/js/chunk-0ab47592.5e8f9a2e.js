(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ab47592"],{"0777":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n}));a("3fab"),a("3f27"),a("8130"),a("a9b6");var r=function(e){return e?[{required:!0,message:e,trigger:"blur"}]:[{required:!0,message:"该项为必填项，请填写完整！",trigger:"blur"}]},n=function(e,t,a){if(""!==t){var r=/^\w+$/;r.test(t)?a():a(new Error("只能填写 字母、数字、下划线组成的字符串！"))}else a()}},5426:function(e,t,a){var r=a("1111").PROPER,n=a("b68d"),i=a("de35"),s="​᠎";e.exports=function(e){return n((function(){return!!i[e]()||s[e]()!==s||r&&i[e].name!==e}))}},"728e":function(e,t,a){},8130:function(e,t,a){"use strict";var r=a("a5ba"),n=a("e280").trim,i=a("5426");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},"9cc2":function(e,t,a){"use strict";a("728e")},f211:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("el-container",[a("el-aside",{attrs:{width:"400px"}},[a("div",{staticClass:"el-tips",staticStyle:{width:"351px"}},[a("span",{staticClass:"el-tips-icon"},[a("i",{staticClass:"el-icon-info"})]),a("span",[e._v("当前选中的节点："),a("span",{staticStyle:{color:"#4A9FF9"}},[e._v(e._s(e.selectDepartment))])])]),a("div",{staticStyle:{"padding-top":"10px","padding-bottom":"10px"}},[a("el-input",{attrs:{placeholder:"请输入内容",size:"medium"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1),a("div",{staticClass:"tree-aside"},[a("el-scrollbar",{ref:"scrollbar",staticStyle:{height:"calc(100vh - 250px)"}},[a("el-tree",{ref:"groupTree",attrs:{"node-key":"id",data:e.treeList,"filter-node-method":e.filterNode,accordion:"","highlight-current":""},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{attrs:{title:r.label}},[e._v(e._s(r.label))]),a("span",[a("i",{staticClass:"fa fa-times closeBtn",on:{click:function(t){return e.deleteNode(r)}}})])])}}])})],1)],1)]),a("el-main",[a("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"120px",size:"medium",rules:e.formRules}},[a("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入部门名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"上级部门"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{readonly:""},model:{value:e.parentName,callback:function(t){e.parentName=t},expression:"parentName"}}),a("el-popover",{attrs:{placement:"right",width:"400",height:"400",trigger:"click"}},[a("div",{staticClass:"tree-aside"},[a("el-scrollbar",{staticStyle:{height:"200px"}},[a("el-tree",{ref:"groupTree1",attrs:{"node-key":"id",data:e.treeList,accordion:"","highlight-current":""},on:{"node-click":e.selectNode}})],1)],1),a("el-button",{attrs:{slot:"reference",icon:"el-icon-edit-outline",circle:""},slot:"reference"})],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),a("el-form-item",{attrs:{label:"排序号"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"number",placeholder:"排序号越大越靠后"},model:{value:e.formData.sort,callback:function(t){e.$set(e.formData,"sort",t)},expression:"formData.sort"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.saveForm}},[e._v("保存")]),a("el-button",{on:{click:e.clearForm}},[e._v("重置")])],1)],1)],1)],1)],1)},n=[],i=(a("28fd"),a("a9b6"),a("0777")),s={name:"admin-department",data:function(){return{filterText:"",selectDepartment:"",treeList:[],parentName:"",formData:{id:"",name:"",parentId:"",remark:"",sort:""},formRules:{name:Object(i["b"])()}}},created:function(){this.getDepartmentTree()},watch:{filterText:function(e){this.$refs.groupTree.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e){var t=this;this.selectDepartment=e.label,this.$get("/admin/department/info/"+e.id).then((function(e){1===e.code&&(t.formData=e.data,t.parentName=e.data.parentName)}))},getDepartmentTree:function(){var e=this;this.$get("/admin/department/tree").then((function(t){1===t.code&&(e.treeList=t.data)}))},deleteNode:function(e){var t=this;this.$confirm("是否确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$get("/admin/department/delete/"+e.id).then((function(e){1===e.code&&(t.getDepartmentTree(),t.$message.success(e.msg))}))}))},selectNode:function(e){this.formData.id===e.id?this.$message.warning("不支持选择自己！"):this.parentName===e.label?(this.parentName="",this.formData.parentId=""):(this.parentName=e.label,this.formData.parentId=e.id)},saveForm:function(){var e=this;this.$refs.form.validate((function(t,a){t?e.$post("/admin/department/save",e.formData).then((function(t){1===t.code&&(e.$message.success(t.msg),e.getDepartmentTree(),e.clearForm())})):e.$message({message:"请完善相关信息填写！",type:"warning"})}))},clearForm:function(){this.parentName="",this.formData={id:"",name:"",parentId:"",remark:"",sort:""}}}},o=s,l=(a("9cc2"),a("cba8")),c=Object(l["a"])(o,r,n,!1,null,"2917d7fe",null);t["default"]=c.exports}}]);