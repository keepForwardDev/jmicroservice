(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7f11954"],{b3f6:function(e,t,r){},c741:function(e,t,r){"use strict";r("b3f6")},cb48:function(e,t,r){"use strict";r.r(t);var o,n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-login"},[r("div",{staticClass:"page-login--layer page-login--layer-area"},[r("ul",{staticClass:"circles"},e._l(10,(function(e){return r("li",{key:e})})),0)]),r("div",{staticClass:"page-login--layer page-login--layer-time",attrs:{flex:"main:center cross:center"}},[e._v(" "+e._s(e.time)+" ")]),r("div",{staticClass:"page-login--layer"},[r("div",{staticClass:"page-login--content",attrs:{flex:"dir:top main:justify cross:stretch box:justify"}},[e._m(0),r("div",{staticClass:"page-login--content-main",attrs:{flex:"dir:top main:center cross:center"}},[r("div",{staticClass:"page-login--form"},[r("el-card",{attrs:{shadow:"never"}},[r("el-form",{ref:"loginForm",attrs:{"label-position":"top",rules:e.rules,model:e.formLogin,size:"default"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.formLogin.username,callback:function(t){e.$set(e.formLogin,"username",t)},expression:"formLogin.username"}},[r("i",{staticClass:"fa fa-user-circle-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formLogin.password,callback:function(t){e.$set(e.formLogin,"password",t)},expression:"formLogin.password"}},[r("i",{staticClass:"fa fa-keyboard-o",attrs:{slot:"prepend"},slot:"prepend"})])],1),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{attrs:{type:"text",placeholder:"验证码"},model:{value:e.formLogin.code,callback:function(t){e.$set(e.formLogin,"code",t)},expression:"formLogin.code"}},[r("template",{slot:"append"},[r("img",{ref:"loginCode",staticClass:"login-code",attrs:{src:e.codeSrc},on:{click:e.changeSrc}})])],2)],1),r("el-button",{staticClass:"button-login",attrs:{size:"default",type:"primary"},on:{click:e.submit}},[e._v(" 登录 ")])],1)],1)],1)]),r("div",{staticClass:"page-login--content-footer"})])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-login--content-header"},[r("p",{staticClass:"page-login--content-header-motto"},[e._v(" 时间是一切财富中最宝贵的财富 ")])])}],s=r("fd6a"),i=(r("3fab"),r("ed02"),r("f1d6")),l=r.n(i),c=r("7736"),u=r("1353"),m=new Uint8Array(16);function p(){if(!o&&(o="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(m)}var d=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function f(e){return"string"===typeof e&&d.test(e)}for(var g=f,h=[],v=0;v<256;++v)h.push((v+256).toString(16).substr(1));function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!g(r))throw TypeError("Stringified UUID is invalid");return r}var y=b;function C(e,t,r){e=e||{};var o=e.random||(e.rng||p)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=o[n];return t}return y(o)}var w=C,L={mixins:[u["a"]],data:function(){return{timeInterval:null,time:l()().format("HH:mm:ss"),dialogVisible:!1,users:[],formLogin:{username:"",password:"",code:"",grant_type:"password",requestSn:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},timeStamp:""}},computed:{codeSrc:function(){return"/auth/loginCode?requestSn=&t="+this.timeStamp}},mounted:function(){var e=this;this.timeStamp=(new Date).getTime(),this.formLogin.requestSn=this.getUuid(),this.timeInterval=setInterval((function(){e.refreshTime()}),1e3)},beforeDestroy:function(){clearInterval(this.timeInterval)},methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])("d2admin/account",["login"])),{},{refreshTime:function(){this.time=l()().format("HH:mm:ss")},submit:function(){var e=this;this.$refs.loginForm.validate((function(t){t?e.$post("/auth/oauth/token",e.formLogin,{Authorization:"Basic amNsb3VkLWFkbWluOmpjbG91ZC1hZG1pbg=="}).then((function(t){1===t.code?e.login(t).then((function(){e.$router.replace(e.$route.query.redirect||"/")})):(e.changeSrc(),e.$message.error(t.msg))})):e.$message.error("表单校验失败，请检查")}))},getUuid:function(){return w().replace(/-/g,"")},changeSrc:function(){this.timeStamp=(new Date).getTime()}})},S=L,k=(r("c741"),r("cba8")),$=Object(k["a"])(S,n,a,!1,null,null,null);t["default"]=$.exports}}]);